install.packages("dplyr")
install.packages("dplyr")
install.packages("dplyr")
library(httr)
base_url <- "https://data.chattlibrary.org/Transportation/Bike-Chattanooga-Trip-Data/8yba-nwv8?"
df_raw <- GET(base_url)
head(df_raw)
?read.csv
temp <- read.table(base_url, header = TRUE)
base_url
temp <- read.table(base_url, header = TRUE, sep = ",")
temp <- read.table(base_url, header = TRUE, sep = ";")
getwd()
setwd("C:/Users/Marc/Desktop/datascience_chat/github/bikeData/")
df_raw <- read.csv("data/Bike_Chattanooga_Trip_Data.csv")
head(df_raw)
stations_ids <- df_raw %>%
select(stationId = StartStationID, stationName = StartStationName) %>%
group_by(StartStationID, StartStationName)
library(dplyr)
stations_ids <- df_raw %>%
select(stationId = StartStationID, stationName = StartStationName) %>%
group_by(StartStationID, StartStationName)
stations_ids <- df_raw %>%
select(stationId = StartStationID, stationName = StartStationName) %>%
group_by(stationId, stationName)
dim(stations_ids)
head(stations_ids)
length(unique(df_raw$StartStationID))
stations_ids <- df_raw %>%
select(stationId = StartStationID, stationName = StartStationName) %>%
group_by(stationId)
dim(stations_ids)
stations_ids <- df_raw %>%
select(stationId = StartStationID) %>%
group_by(stationId)
stations_ids <- df_raw %>%
select(StartStationID) %>%
group_by(StartStationID)
stations_ids <- df_raw %>%
distinct(select(stationId = StartStationID, stationName = StartStationName))
distinct(select(StartStationID, StartStationName))
names(df_raw)
stations_ids <- df_raw %>%
distinct(select(stationId = StartStationID))
distinct(select(df_raw, StartStationID, StartStationName))
stations_ids <- distinct(select(df_raw, StartStationID, StartStationName))
stations_ids
stations_ids <- distinct(select(df_raw, stationId = StartStationID, StartStationName))
stations_ids
stations_ids <- distinct(select(df_raw, stationId = StartStationID, stationName = StartStationName))
lat_lon <- merge(stations_ids, lat_lon, by = c("StartStationName"))
lat_lon <- merge(stations_ids, lat_lon, by = c("StartStationName"), all.x = TRUE)
lat_lon <- read.csv("data/stations_lat_lon.csv", sep = ";")
dim(stations_ids)
dim(lat_lon)
lat_lon <- merge(stations_ids, lat_lon, by = c("StartStationName"), all.x = TRUE)
length(unique(lat_lon$StartStationName))
length(unique(stations_ids$StartStationName))
head(stations_ids)
str(stations_ids)
options(stringsAsFactors = FALSE)
stations_ids <- distinct(select(df_raw, stationId = StartStationID, StartStationName))
lat_lon <- merge(stations_ids, lat_lon, by = c("StartStationName"), all.x = TRUE)
dim(lat_lon)
lat_lon[is.na(lat_lon)]
lat_lon[is.na(lat_lon$latlon)]
as.Date("02/10/2013")
td = "02/10/2013"
strptime(td, "%m/%d/%Y")
df_raw$StartDate <- strptime(df_raw$StartDate, "%m/%d/%Y")
head(df_raw)
dim(df_raw[df_raw$StartStationID == funny_stations_df$stationId[1], ])
funny_stations_df <- lat_lon[is.na(lat_lon$latlon), ]
names(funny_stations_df)[1] <- "stationName"
funny_stations_df
dim(df_raw[df_raw$StartStationID == funny_stations_df$stationId[1], ])
temp <- group_by(df_raw, stationId = StartStationID, StartStationName) %>%
summarize(total_entries = n(), minStartDate = min(StartDate), maxStartDate = max(StartDate),
minEndDate = min(EndDate), maxEndDate = max(EndDate)) %>%
arrange(desc(total_entries))
df_raw$StartDate <- strptime(df_raw$StartDate, "%m/%d/%Y")
df_raw$EndDate <- strptime(df_raw$EndDate, "%m/%d/%Y")
temp <- group_by(df_raw, stationId = StartStationID, StartStationName) %>%
summarize(total_entries = n(), minStartDate = min(StartDate), maxStartDate = max(StartDate),
minEndDate = min(EndDate), maxEndDate = max(EndDate)) %>%
arrange(desc(total_entries))
head(df_raw$StartDate)
head(df_raw)
df_raw <- read.csv("data/Bike_Chattanooga_Trip_Data.csv")
df_raw$StartDate <- strptime(df_raw$StartDate, "%m/%d/%Y")
df_raw$EndDate <- strptime(df_raw$EndDate, "%m/%d/%Y")
head(df_raw)
temp <- group_by(df_raw, stationId = StartStationID, StartStationName) %>%
summarize(total_entries = n(), minStartDate = min(StartDate), maxStartDate = max(StartDate),
minEndDate = min(EndDate), maxEndDate = max(EndDate)) %>%
arrange(desc(total_entries))
head(df_raw)
head(df_raw$StartDate)
?as.Date
df_raw <- read.csv("data/Bike_Chattanooga_Trip_Data.csv")
str(df_raw)
df_raw$StartDate <- strptime(df_raw$StartDate, "%m/%d/%Y")
str(df_raw)
df_raw <- read.csv("data/Bike_Chattanooga_Trip_Data.csv")
df_raw$StartDate <- as.Date(strptime(df_raw$StartDate, "%m/%d/%Y"))
str(df_raw)
df_raw <- read.csv("data/Bike_Chattanooga_Trip_Data.csv")
df_raw$StartDate <- as.Date(df_raw$StartDate, "%m/%d/%Y")
str(df_raw)
df_raw <- read.csv("data/Bike_Chattanooga_Trip_Data.csv")
df_raw$StartDate <- as.Date(df_raw$StartDate, "%m/%d/%Y")
df_raw$EndDate <- as.Date(df_raw$EndDate, "%m/%d/%Y")
temp <- group_by(df_raw, stationId = StartStationID, StartStationName) %>%
summarize(total_entries = n(), minStartDate = min(StartDate), maxStartDate = max(StartDate),
minEndDate = min(EndDate), maxEndDate = max(EndDate)) %>%
arrange(desc(total_entries))
temp
print.data.frame(temp)
class(temp$total_entries)
temp <- group_by(df_raw, stationId = StartStationID, StartStationName) %>%
summarize(total_entries = n(), minStartDate = min(StartDate), maxStartDate = max(StartDate),
minEndDate = min(EndDate), maxEndDate = max(EndDate)) %>%
arrange(desc(n()))
temp <- group_by(df_raw, stationId = StartStationID, StartStationName) %>%
summarize(total_entries = n(), minStartDate = min(StartDate), maxStartDate = max(StartDate),
minEndDate = min(EndDate), maxEndDate = max(EndDate)) %>%
arrange(desc(total_entries))
temp
temp <- group_by(df_raw, stationId = StartStationID, StartStationName) %>%
summarize(total_entries = length(StartStationName), minStartDate = min(StartDate), maxStartDate = max(StartDate),
minEndDate = min(EndDate), maxEndDate = max(EndDate)) %>%
arrange(desc(total_entries))
print.data.frame(temp)
temp <- group_by(df_raw, stationId = StartStationID, StartStationName) %>%
summarize(total_entries = n(), minStartDate = min(StartDate), maxStartDate = max(StartDate),
minEndDate = min(EndDate), maxEndDate = max(EndDate)) %>%
arrange(desc(dsfsdf))
temp <- group_by(df_raw, stationId = StartStationID, StartStationName) %>%
summarize(total_entries = n(), minStartDate = min(StartDate), maxStartDate = max(StartDate),
minEndDate = min(EndDate), maxEndDate = max(EndDate)) %>%
arrange(desc(total_entries))
print.data.frame(temp)
food_nutr_df_grouped <- group_by(food_nutr_df, FdGrp_Desc) %>%
summarise(No_foods = length(FdGrp_Desc)) %>%
arrange(desc(minStartDate))
temp <- group_by(df_raw, stationId = StartStationID, StartStationName) %>%
summarize(total_entries = n(), minStartDate = min(StartDate), maxStartDate = max(StartDate),
minEndDate = min(EndDate), maxEndDate = max(EndDate)) %>%
arrange(desc(minStartDate))
print.data.frame(temp)
temp <- group_by(df_raw, stationId = StartStationID, StartStationName) %>%
summarize(total_entries = n(), minStartDate = min(StartDate), maxStartDate = max(StartDate),
minEndDate = min(EndDate), maxEndDate = max(EndDate)) %>%
arrange(desc(stationId))
print.data.frame(temp)
temp <- group_by(df_raw, stationId = StartStationID) %>%
summarize(total_entries = n(), minStartDate = min(StartDate), maxStartDate = max(StartDate),
minEndDate = min(EndDate), maxEndDate = max(EndDate)) %>%
arrange(desc(stationId))
print.data.frame(temp)
temp <- group_by(df_raw, stationId = StartStationID) %>%
summarize(total_entries = n(), minStartDate = min(StartDate), maxStartDate = max(StartDate),
minEndDate = min(EndDate), maxEndDate = max(EndDate)) %>%
arrange(desc(total_entries))
print.data.frame(temp)
temp <- group_by(df_raw, stationId = StartStationID, StartStationName) %>%
summarize(total_entries = n(), minStartDate = min(StartDate), maxStartDate = max(StartDate),
minEndDate = min(EndDate), maxEndDate = max(EndDate)) %>%
arrange(desc(total_entries))
print.data.frame(temp)
temp <- group_by(df_raw, stationId = StartStationID, stationName = StartStationName) %>%
summarize(total_entries = n(), minStartDate = min(StartDate), maxStartDate = max(StartDate),
minEndDate = min(EndDate), maxEndDate = max(EndDate)) %>%
arrange(desc(total_entries))
print.data.frame(temp)
temp <- group_by(df_raw, stationId = StartStationID) %>%
summarize(stationName = unique(StartStationName), total_entries = n(), minStartDate = min(StartDate), maxStartDate = max(StartDate),
minEndDate = min(EndDate), maxEndDate = max(EndDate)) %>%
arrange(desc(total_entries))
print.data.frame(temp)
stations_ids <- group_by(df_raw, stationId = StartStationID) %>%
summarize(stationName = unique(StartStationName), total_entries = n(), minStartDate = min(StartDate),
maxStartDate = max(StartDate), minEndDate = min(EndDate), maxEndDate = max(EndDate)) %>%
arrange(desc(total_entries))
names(stations_ids)
lat_lon <- merge(stations_ids, lat_lon, by = c("StartStationName"), all.x = TRUE)
stations_ids <- group_by(df_raw, stationId = StartStationID) %>%
summarize(StartStationName = unique(StartStationName), total_entries = n(), minStartDate = min(StartDate),
maxStartDate = max(StartDate), minEndDate = min(EndDate), maxEndDate = max(EndDate)) %>%
arrange(desc(total_entries))
print.data.frame(stations_ids)
lat_lon <- merge(stations_ids, lat_lon, by = c("StartStationName"), all.x = TRUE)
head(lat_lon)
lat_lon[is.na(latlon$latlon), ]
is.na(latlon$latlon)
lat_lon <- merge(stations_ids, lat_lon, by = c("StartStationName"), all.x = TRUE)
head(lat_lon)
lat_lon[is.na(lat_lon$latlon), ]
names(lat_lon)
names(df_raw)
funny_stations <- lat_lon[is.na(lat_lon$latlon), ]$stationId
funny_stations
df <- subset(df_raw, !(StartStationID %in% funny_stations | EndStationID %in% funny_stations))
dim(df_raw)
dim(df)
df_raw <- read.csv("data/Bike_Chattanooga_Trip_Data.csv")
df_raw$StartDateTime <- strptime(df_raw$StartDateTime, "%m/%d/%Y %H:%M:%S %p")
df_raw <- read.csv("data/Bike_Chattanooga_Trip_Data.csv")
head(df_raw$StartDateTime)
df_raw$StartDateTime <- strptime(df_raw$StartDateTime, "%m/%d/%Y %H:%M:%S %p")
head(df_raw$StartDateTime)
?strptime
df_raw <- read.csv("data/Bike_Chattanooga_Trip_Data.csv")
df_raw$StartDateTime <- strptime(df_raw$StartDateTime, "%m/%d/%Y %I:%M:%S %p")
head(df_raw$StartDateTime)
df_raw <- read.csv("data/Bike_Chattanooga_Trip_Data.csv")
# Change the class of some columns and add some new ones
df_raw$StartDate <- as.Date(df_raw$StartDate, "%m/%d/%Y")
df_raw$EndDate <- as.Date(df_raw$EndDate, "%m/%d/%Y")
df_raw$StartDateTime <- as.POSIXct(strptime(df_raw$StartDateTime, "%m/%d/%Y %I:%M:%S %p"))
df_raw$EndDateTime <- as.POSIXct(strptime(df_raw$EndDateTime, "%m/%d/%Y %I:%M:%S %p"))
df_raw$MemberType <- as.factor(df_raw$MemberType)
df_raw$StartDay <- as.factor(df_raw$StartDay)
df_raw$EndDay <- as.factor(df_raw$EndDay)
df_raw$tripDurationHours <- round(df_raw$TripDurationSec / (60 *60), 2)
lat_lon <- read.csv("data/stations_lat_lon.csv", sep = ";")
stations_df <- group_by(df_raw, stationId = StartStationID) %>%
summarize(StartStationName = unique(StartStationName), total_entries = n(),
maxStartDate = max(StartDate), maxEndDate = max(EndDate)) %>%
arrange(desc(total_entries))
lat_lon <- merge(stations_df, lat_lon, by = c("StartStationName"), all.x = TRUE)
funny_stations <- lat_lon[is.na(lat_lon$latlon), ]$stationId
funny_stations
df <- subset(df_raw, !(StartStationID %in% funny_stations | EndStationID %in% funny_stations))
nrow(df)
nrow(df_raw)
names(df_raw)
funny_stations
df_raw <- read.csv("data/Bike_Chattanooga_Trip_Data.csv")
169+25+4
126539+198
names(lat_lon)
lat_lon <- read.csv("data/stations_lat_lon.csv", sep = ";")
names(lat_lon)
names(df)
?merge
df_raw <- read.csv("data/Bike_Chattanooga_Trip_Data.csv")
df_raw$StartDate <- as.Date(df_raw$StartDate, "%m/%d/%Y")
df_raw$EndDate <- as.Date(df_raw$EndDate, "%m/%d/%Y")
df_raw$StartDateTime <- as.POSIXct(strptime(df_raw$StartDateTime, "%m/%d/%Y %I:%M:%S %p"))
df_raw$EndDateTime <- as.POSIXct(strptime(df_raw$EndDateTime, "%m/%d/%Y %I:%M:%S %p"))
df_raw$MemberType <- as.factor(df_raw$MemberType)
df_raw$StartDay <- as.factor(df_raw$StartDay)
df_raw$EndDay <- as.factor(df_raw$EndDay)
df_raw$tripDurationHours <- round(df_raw$TripDurationSec / (60 *60), 2)
df_raw$StartDate <- as.Date(df_raw$StartDate, "%m/%d/%Y")
df_raw$EndDate <- as.Date(df_raw$EndDate, "%m/%d/%Y")
df_raw$StartDateTime <- as.POSIXct(strptime(df_raw$StartDateTime, "%m/%d/%Y %I:%M:%S %p"))
df_raw$EndDateTime <- as.POSIXct(strptime(df_raw$EndDateTime, "%m/%d/%Y %I:%M:%S %p"))
df_raw$MemberType <- as.factor(df_raw$MemberType)
df_raw$StartDay <- as.factor(df_raw$StartDay)
df_raw$EndDay <- as.factor(df_raw$EndDay)
df_raw$tripDurationHours <- round(df_raw$TripDurationSec / (60 *60), 2)
lat_lon <- read.csv("data/stations_lat_lon.csv", sep = ";")
stations_lat_lon <- merge(stations_df, lat_lon, by.x = c("StartStationName"), by.y = c("stationName"), all.x = TRUE)
head(stations_lat_lon)
names(df)
df <- merge(df, lat_lon, StartStationName, by.x = c("StartStationName"), by.y = c("stationName"))
names(df)
names(df)["latlon"]
names(df) == ["latlon"]
names(df) == "latlon"
df <- merge(df, lat_lon, by.x = c("StartStationName"), by.y = c("stationName"))
names(df)[names(df) == "latlon"] <- latlonStart
?boxplot
boxplot(df$tripDurationHours, outline = FALSE)
require(lubridate)
class(year(df$StartDay))
install.packages("lubridate")
require(lubridate)
class(year(df$StartDay))
class(df$StartDay)
class(df$StartDate)
class(year(df$StartDate))
head(year(df$StartDate))
boxplot(as.factor(year(df$StartDate)) ~ df$tripDurationHours, outline = FALSE)
temp <- as.factor(year(df$StartDate))
head(temp)
boxplot(df$tripDurationHours ~ as.factor(year(df$StartDate)), outline = FALSE)
boxplot(df$tripDurationHours ~ as.factor(year(df$StartDate)), outline = FALSE, varwidth = TRUE)
