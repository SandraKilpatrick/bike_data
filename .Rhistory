rm(list=ls())
setwd("/Users/sandrakilpatrick/bike_data")
options(stringsAsFactors = FALSE)
library(dplyr)
library(readr) #read .csv file
#library(RCurl)
#library(XML)
library(downloader) #simplify downloading of file from URL
if(!file.exists("data")) {
dir.create("data")
}
fileUrl <- "https://data.chattlibrary.org/api/views/8yba-nwv8/rows.csv?accessType=DOWNLOAD"
download(fileUrl,destfile="~/bike_data/bike_data.csv",mode="wb")
dateDownloaded <- date()
dateDownloaded
df_raw<-read_csv("~/bike_data/bike_data.csv")
options(width = 120)
#df_raw <- read.csv("data/Bike_Chattanooga_Trip_Data.csv")
# Change the class of some columns and add some new ones
df_raw$StartDate <- as.Date(df_raw$StartDate, "%m/%d/%Y")
df_raw$EndDate <- as.Date(df_raw$EndDate, "%m/%d/%Y")
df_raw$StartDateTime <- as.POSIXct(strptime(df_raw$StartDateTime, "%m/%d/%Y %I:%M:%S %p"))
df_raw$EndDateTime <- as.POSIXct(strptime(df_raw$EndDateTime, "%m/%d/%Y %I:%M:%S %p"))
df_raw$MemberType <- as.factor(df_raw$MemberType)
df_raw$StartDay <- as.factor(df_raw$StartDay)
df_raw$EndDay <- as.factor(df_raw$EndDay)
df_raw$tripDurationHours <- round(df_raw$TripDurationSec / (60 *60), 2)
# StartTime, EndTime are char type but probably not needed so they are left as is
str(df_raw)
